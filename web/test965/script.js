
 
      
    var chats={
  "participants": [
    {
      "name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o"
    },
    {
      "name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt"
    }
  ],
  "messages": [
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148926431,
      "content": "Gh",
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148921915,
      "content": "You set the emoji to \u00f0\u009f\u0091\u00b6.",
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148917063,
      "content": "You changed the chat colours.",
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148901919,
      "content": "E\u00c9\u00b1o set the emoji to \u00f0\u009f\u0098\u008d.",
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148889748,
      "content": "E\u00c9\u00b1o changed the chat colours.",
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148883194,
      "content": "E\u00c9\u00b1o: \u00f3\u00b0\u0080\u0080",
      "sticker": {
        "uri": "messages/stickers_used/851587_369239346556147_162929011_n_369239343222814.png"
      },
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148865999,
      "content": "Je suis \u00c3\u00a0 la recherche d'un emploi \u00c3\u00a0",
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148863210,
      "content": "Je suis \u00c3\u00a0 votre",
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148861860,
      "content": "Je suis \u00c3\u00a0 la recherche d'un emploi pour le mois",
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148826814,
      "content": "You sent a sticker.",
      "sticker": {
        "uri": "messages/stickers_used/851575_126362067548590_1152922410_n_126362064215257.png"
      },
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148825863,
      "content": "You sent a sticker.",
      "sticker": {
        "uri": "messages/stickers_used/851575_126361924215271_792446242_n_126361920881938.png"
      },
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148803494,
      "content": "E\u00c9\u00b1o sent a sticker.",
      "sticker": {
        "uri": "messages/stickers_used/42966880_529233767538985_7584993157624889344_n_529233764205652.png"
      },
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148802251,
      "content": "E\u00c9\u00b1o sent a sticker.",
      "sticker": {
        "uri": "messages/stickers_used/43049558_529233750872320_1194463424726171648_n_529233744205654.png"
      },
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148780419,
      "content": "Hrmrhm3uk",
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148779662,
      "content": "You sent 4 photos.",
      "photos": [
        {
          "uri": "messages/inbox/EoRoo_AY1T8nIsTg/photos/49748469_233934817537070_6556811921499095040_n_233934814203737.jpg",
          "creation_timestamp": 1548148777
        },
        {
          "uri": "messages/inbox/EoRoo_AY1T8nIsTg/photos/50610801_576561279841074_2998930308495048704_n_576561276507741.jpg",
          "creation_timestamp": 1548148778
        },
        {
          "uri": "messages/inbox/EoRoo_AY1T8nIsTg/photos/50250667_392766708137003_1743561477257691136_n_392766704803670.jpg",
          "creation_timestamp": 1548148778
        },
        {
          "uri": "messages/inbox/EoRoo_AY1T8nIsTg/photos/50894970_307905149868673_4851394143286460416_n_307905143202007.jpg",
          "creation_timestamp": 1548148778
        }
      ],
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148729395,
      "content": "You sent a video.",
      "videos": [
        {
          "uri": "messages/inbox/EoRoo_AY1T8nIsTg/videos/video1548148729_330609657783453.mp4",
          "creation_timestamp": 1548148729,
          "thumbnail": {
            "uri": "messages/inbox/EoRoo_AY1T8nIsTg/videos/thumbnails/29768189_1872802712789977_1331986969447118233_n.jpg"
          }
        }
      ],
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148679559,
      "content": "You sent a GIF from Disney Gif.",
      "gifs": [
        {
          "uri": "messages/inbox/EoRoo_AY1T8nIsTg/gifs/31048131_10156858652285260_9146085427508150272_n_335215897087298.gif"
        }
      ],
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148612200,
      "content": "Hiih",
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148603867,
      "content": "E\u00c9\u00b1o sent a GIF from Tenor GIF Keyboard.",
      "gifs": [
        {
          "uri": "messages/inbox/EoRoo_AY1T8nIsTg/gifs/50130469_238699720374114_8022843366687375360_n_300399957284782.gif"
        }
      ],
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148578152,
      "content": "Uihyy",
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148570714,
      "content": "E\u00c9\u00b1o sent a video.",
      "videos": [
        {
          "uri": "messages/inbox/EoRoo_AY1T8nIsTg/videos/video1548148570_2201094410138849.mp4",
          "creation_timestamp": 1548148569,
          "thumbnail": {
            "uri": "messages/inbox/EoRoo_AY1T8nIsTg/videos/thumbnails/29768189_1872802712789977_1331986969447118233_n.jpg"
          }
        }
      ],
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148557675,
      "content": "E\u00c9\u00b1o sent a voice message.",
      "audio_files": [
        {
          "uri": "messages/inbox/EoRoo_AY1T8nIsTg/audio/audioclip15481485570002624_750224442043209.mp4",
          "creation_timestamp": 1548148557
        }
      ],
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148549140,
      "content": "Fyff",
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148547141,
      "content": "Huigf",
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148544085,
      "content": "E\u00c9\u00b1o sent 4 photos.",
      "photos": [
        {
          "uri": "messages/inbox/EoRoo_AY1T8nIsTg/photos/50695486_220146038797045_7237380997430378496_n_220146035463712.jpg",
          "creation_timestamp": 1548148541
        },
        {
          "uri": "messages/inbox/EoRoo_AY1T8nIsTg/photos/50394032_373926080104373_3206743731336118272_n_373926076771040.jpg",
          "creation_timestamp": 1548148542
        },
        {
          "uri": "messages/inbox/EoRoo_AY1T8nIsTg/photos/50719259_585741908542499_829832701434396672_n_585741905209166.jpg",
          "creation_timestamp": 1548148541
        },
        {
          "uri": "messages/inbox/EoRoo_AY1T8nIsTg/photos/50593770_230820501127734_8838154719269486592_n_230820497794401.jpg",
          "creation_timestamp": 1548148542
        }
      ],
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148518053,
      "content": "Hi",
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148495729,
      "content": "You can now call each other and see information such as Active Status and when you've read messages.",
      "type": "Generic"
    },
    {
      "sender_name": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
      "timestamp_ms": 1548148495177,
      "content": "E\u00c9\u00b1o: \u00f3\u00b0\u0080\u0080",
      "sticker": {
        "uri": "messages/stickers_used/851577_246547505491999_862435009_n_227878347358915.png"
      },
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148357863,
      "content": "Jjjj",
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148355818,
      "content": "Hjkjj",
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148338604,
      "content": "You sent a photo.",
      "photos": [
        {
          "uri": "messages/inbox/EoRoo_AY1T8nIsTg/photos/50801716_686560378453024_7200167442272747520_n_686560371786358.jpg",
          "creation_timestamp": 1548148336
        }
      ],
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148300607,
      "content": "You: \u00f3\u00b0\u0080\u0080",
      "sticker": {
        "uri": "messages/stickers_used/39178562_1505197616293642_5411344281094848512_n_369239263222822.png"
      },
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148297472,
      "content": "I am  fyjvghhgjgkgjh",
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148279581,
      "content": "Hdmhrm gneyjyejyej eyneyjeyjeyj egjwtjyejghii.",
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148261793,
      "content": "Hellow",
      "type": "Generic"
    },
    {
      "sender_name": "Pr\u00c3\u00af\u00c3\u00b1\u00c3\u00a7\u00c4\u0093 Of-Y\u00c3\u00b8\u00c3\u00bcr H\u00c4\u0099\u00c3\u00a5rt",
      "timestamp_ms": 1548148224767,
      "content": "Hii",
      "type": "Generic"
    }
  ],
  "title": "E\u00c9\u00b1o Ro\u00c9\u00b1\u00c9\u0098o",
  "is_still_participant": true,
  "thread_type": "Regular",
  "thread_path": "inbox/EoRoo_AY1T8nIsTg"
}



     function checkfrom(i) {
    i=eval(i);
    if(chats["messages"][i]['sender_name']==chats["participants"][0]["name"]){
        return "me";
    }else{
    if(chats["messages"][i]['sender_name']==chats["participants"][1]["name"]){
        return "she";}else{
            return "cen";
        }
    }
}
function msgtype(i) {
    return chats["messages"][i]['type']
}
function msglength(i) {

        try {
            return chats["messages"][i]['content'].length
        } catch (error) {
            return 20;
        }
}
function getdata(i) {
$("#nm").val(ti);
    if(chats["messages"][i]['sticker']!=undefined){
        return "<img class=sticker src='"+chats["messages"][i]['sticker']['uri']+"'>";
    }else{
    if(chats["messages"][i]['photos']!=undefined){
        var ms="";
        for(var j=0;j<chats["messages"][i]['photos'].length;j++){
        ms=ms+"<img class=mi src='"+chats["messages"][i]['photos'][j]['uri']+"'>";} return ms;}else{
            if(chats["messages"][i]['videos']!=undefined){
        var ms="";
        for(var j=0;j<chats["messages"][i]['videos'].length;j++){
        ms=chats["messages"][i]['content']+"<img class=mi src='"+chats["messages"][i]['videos'][j]['thumbnail']['uri']+"'><i class='zmdi zmdi-play-circle-outline  centered'></i>";} return ms;
        }else{  if(chats["messages"][i]['gifs']!=undefined){
        var ms="";
        for(var j=0;j<chats["messages"][i]['gifs'].length;j++){
        ms=ms+"<img class=mi src='"+chats["messages"][i]['gifs'][j]['uri']+"'>";} return ms;}else{
            return chats["messages"][i]['content']} 
        }
        
    }
   // 
   
}}



function gettime(i) {
    return chats["messages"][i]['timestamp_ms']
}
var ti=chats["messages"].length-1;

function loop(ti) {
    updatecol();
    ti=eval(ti);
try{
    setTimeout(function() {
        if(checkfrom(ti)=="she"){
            me(ti)
        }else{
            if(checkfrom(ti)=="me"){
                she(ti)
            }else{
                cen(ti)
            }
        } 
        ti--;
    if($("#stop").val()=="Stop"){
if($("#ap").children().length>=1000){
        $("#ap").find('div:first').remove();
        
    }
        loop(ti);
    }else{
        $("#nm").val(ti)
    }
    },1000)
  }catch{
      $("#nm").val(ti-1)
      $("#stop").val("Continue");
      $("#nm").val(ti-1)
      
  }  
}
function convert(text) {
try{
            text = text.replace(/^\s+/, '');
            text = text.replace(/\s+$/, '');
            text = text.replace(/\n/g, "<br>");
            var bytes = [];
            if (/^(\\x[0-9a-f]{1,2})/i.test(text)) {
                bytes = text.match(/(\\x[0-9a-f]{1,2})/gi);
            }
            else if (/^0x[0-9a-f]{1,2}/i.test(text)) {
                bytes = text.match(/(0x[0-9a-f]{1,2})/gi);
                if (bytes.length == 1) {
                    if (text.length == 3 || text.length == 4) {
                    
                    }
                    else {
                        
                        text = text.replace("u00", "");
                        bytes = text.match(/([0-9a-f]{2})/gi);
                    }
                }
            }
            else if (/^[0-9a-f]{1,2}$/i.test(text)) {
                
                bytes.push(text);
            }
            else if (/^[0-9a-f]{1,2} /i.test(text)) {
                bytes = text.split(' ');
            }
            else {
                var chars = text.split('');
                for (var i = 0; i < chars.length; i++) {
                    bytes.push(chars[i].charCodeAt(0).toString(16));
                }
            }
            
            for (var i = 0; i < bytes.length; i++) {
                bytes[i] = bytes[i].replace("\\x", '');
                bytes[i] = bytes[i].replace("\\X", '');
            }

            var utf8Text = '';
            for (var i = 0; i < bytes.length; i++) {
                utf8Text += String.fromCharCode(parseInt(bytes[i], 16));
            }

            return utf8.decode(utf8Text);
} catch{
        $("#nm").val(ti-1)
      $("#stop").val("Continue");
      $("#nm").val(ti-1)
  }  
        }


function getlastmsg(i){
    i=eval(i);
 if(i==chats["messages"].length-1){
     return true;
 }else{
    if(chats["messages"][i+1]['sender_name']!=chats["participants"][1]["name"]){
    return true ;
    }else{
        return false;
    }}
}
function me(i) {
    var tick="";
    time=new Date(gettime(i));
    time=time.toString().substring(0,25);
    msg=getdata(i)
    if(msg!=undefined){
      // 
       var scroll=($(".conversation-container").scrollTop())+1550;
    
//autoscroll 
    if(getlastmsg(i)===true){
         $("#ap").append("<div><img src='images/avatar.jpg' class=picrec>");
    }
    $("#ap").append("<div onclick=sh(this) data-t='Message id:"+i+"\ntime:"+time+"' class='message received'>"+convert(msg)+"</div>");
    if(getlastmsg(i)===true){
        $("#ap").append("</div>");
    }
    $(".sticker").parent().css("background","none");
$(".mi").parent().css("background","none");
   $(".conversation-container").scrollTop(scroll);
}}
    
function she(i) {
    var tick="";
    time=new Date(gettime(i));
    time=time.toString().substring(0,25);
    msg=getdata(i)
    if(msg!=undefined){
        var scroll=($(".conversation-container").scrollTop())+1550;
            
//autoscroll 
$(".conversation-container").scrollTop(scroll);

    $("#ap").append("<div onclick=sh(this) data-t='Message id:"+i+"\ntime:"+time+"' class='message sent'>"+convert(msg)+"</div>");
$(".sticker").parent().css("background","none");
$(".mi").parent().css("background","none");
    $(".conversation-container").scrollTop(scroll);
}}

function cen(msg) {
    
       var scroll=($(".conversation-container").scrollTop())+1550;
        
//autoscroll 
$(".conversation-container").scrollTop(scroll);

    $("#ap").append("<div class='message cen'>"+convert(msg)+"</div>");
$(".sticker").parent().css("background","none");
$(".mi").parent().css("background","none");
   $(".conversation-container").scrollTop(scroll);
}

function sh(a){
    alert($(a).attr("data-t"))
} 
function g(){
 $("#stop").val("Continue");
    loop(parseInt(prompt("Enter number")));

    }
$(function(){
    $("#secure").hide();
    $("#login").show();
   $("#btnlogin").click(function(){
   
      $("#login").hide();
      $("#loader").fadeIn(1);
      setTimeout(function(){
      if($("#pass").val()==""){
      $("#loader").fadeOut(100);
      $("#secure").fadeIn(100);
      loop(ti);
      }
      else{
          alert("Authentication Error");
         $("#loader").fadeOut(100);
         $("#login").fadeIn(100);
      }
      },5)
   })
   $("#stop").click(function(){
       if($("#stop").val()=="Stop"){
           $("#stop").val("Continue");
       }else{
           $("#stop").val("Stop");
           loop(eval($("#nm").val()));
       }
   });
 $(".zmdi-time-restore").click(function(){
       $(".dc").click();
   });
 
 $(".c-box button").each(function(index){
     $(this).css("background",$(this).val())
     $(this).css("color",$(this).val())
     $(this).html("<i class='zmdi zmdi-check'></i>")
 });
 $(".c-box button").each(function(index){
     $(this).click(function(){
         $(".status").css("color",$(this).val());
         setcol()
         updatecol()
     });
 })
 function setcol(){
 $(".c-box button").each(function(index){
     if(rgb2hex($(".status").css("color")).toUpperCase()==$(this).val()){
         $(this).css("color","#fff");
     }else{
         $(this).css("color",$(this).val())
     }
 })
 }
 $.fn.setcolor=function(){
     $(this).css("color",rgb2hex($(".status").css("color")))
}
 $.fn.setbg=function(){
     $(this).css("background",rgb2hex($(".status").css("color")))
 }
 
 $("#nickname").val($("#name").html()).select()

})
function rgb2hex(orig) {
  var a, isPercent,
    rgb = orig.replace(/\s/g, '').match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),
    alpha = (rgb && rgb[4] || "").trim(),
    hex = rgb ? "#" +
    (rgb[1] | 1 << 8).toString(16).slice(1) +
    (rgb[2] | 1 << 8).toString(16).slice(1) +
    (rgb[3] | 1 << 8).toString(16).slice(1) : orig;
  if (alpha !== "") {
    isPercent = alpha.indexOf("%") > -1;
    a = parseFloat(alpha);
    if (!isPercent && a >= 0 && a <= 1) {
      a = Math.round(255 * a);
    } else if (isPercent && a >= 0 && a <= 100) {
      a = Math.round(255 * a / 100)
    } else {
      a = "";
    }
  }
  if (a) {
    hex += (a | 1 << 8).toString(16).slice(1);
  }
  return hex;
}
function menu(){
    $(".speech-bubble").toggle(200);
    $(".n-box").hide(100);
    $(".m-box").hide(100);
    $(".c-box").hide(100);
}

function updatecol(){
     $(".user-bar").setcolor();
     $(".zmdi-time-restore").setcolor();
     $("#stop").setbg();
     $(".zmdi-menu").setcolor();
     $(".sent").setbg();
     $(".n-box input").css("border-bottom-color",rgb2hex($(".status").css("color")));
     $(".s-box input").css("border-bottom-color",rgb2hex($(".status").css("color")));
      $(".m-box input").css("border-bottom-color",rgb2hex($(".status").css("color")))
$(".sticker").parent().css("background","#fff");
    $(".mi").parent().css("background","#fff");
 }

function search(q){
    var a=[q];
    for(var i=0;i<chats["messages"].length;i++){
        if(chats["messages"][i]['content'].toUpperCase().indexOf(q.toUpperCase())!=-1){
            a.push(i);
         
        }
       
    }
    return a;
}
// 
function highlight(q,msg) {
  var index = (msg.toUpperCase()).indexOf(q.toUpperCase());
  if (index >= 0) { 
   msg = msg.substring(0,index) + "<span class='highlight'>" + msg.substring(index,index+q.length) + "</span>" + msg.substring(index + q.length);
   return msg;
  }
}
function searchwrite(query){
 $("#stop").html("Continue")
    var q=search(query);
    cen(eval(q.length-1) +"result(s) found for '"+q[0]+"'<hr>")
    for(var i=1;i<q.length;i++){
        if(checkfrom(q[i])=="she"){
       var it=q[i];
            time=new Date(gettime(it));
    time=time.toString().substring(0,25);
    msg=getdata(it)
    if(msg!=undefined){
       var scroll=($(".conversation-container").scrollTop())+1550;
    
//autoscroll 
    if(getlastmsg(it)===true){
         $("#ap").append("<div><img src='images/avatar.jpg' class=picrec>");
    }
    var twt="div oncontextmenu=loop(parseInt($(this).attr('data-id')));$('#stop').html('Continue') data-id";
    $("#ap").append("<"+twt+"="+it+" onclick=sh(this) data-t='Message id:"+it+"\ntime:"+time+"\nTip: longpress to see this msg in conversation' class='message received'>"+convert(highlight(q[0],msg))+"</div>");
    if(getlastmsg(it)===true){
        $("#ap").append("</div>");
    }
    $(".sticker").parent().css("background","none");
$(".mi").parent().css("background","none");
   $(".conversation-container").scrollTop(scroll);
}
            
        }else{
       ti=q[i] 
            time=new Date(gettime(ti));
    time=time.toString().substring(0,25);
    msg=getdata(ti)
    if(msg!=undefined){
        var scroll=($(".conversation-container").scrollTop())+1550;
            
//autoscroll 
$(".conversation-container").scrollTop(scroll);

    $("#ap").append("<div oncontextmenu=loop(parseInt($(this).attr('data-id')));$('#stop').html('Continue') data-id="+ti+" onclick=sh(this) data-t='Message id:"+ti+"\nTime : "+time+"\nTip: longpress to see this msg in conversation' class='message sent'>"+convert(highlight(q[0],msg))+"</div>");
$(".sticker").parent().css("background","none");
$(".mi").parent().css("background","none");
    $(".conversation-container").scrollTop(scroll);
}
            
        }
    }
    cen("end of result <hr>")
}
